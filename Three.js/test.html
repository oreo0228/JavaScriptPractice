<!DOCTYPE html>
<html>
<head>
  <title>マウスホイールでアイテムインベントリを選択</title>
</head>
<body>
  <div id="canvas-container"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    // シーンの作成
const scene = new THREE.Scene();

// カメラの作成
const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
camera.position.set(0, 0, 5);
camera.lookAt(0, 0, 0);

// レンダラーの作成
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// ブロックの作成
const geometry = new THREE.BoxGeometry(1, 1, 1);
const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
const block = new THREE.Mesh(geometry, material);
block.position.set(0, 0, -2);
scene.add(block);

// キーボードの状態を追跡するオブジェクト
const keyboard = {};

// キーボードのイベントリスナーを追加
document.addEventListener('keydown', (event) => {
  keyboard[event.code] = true;
});

document.addEventListener('keyup', (event) => {
  keyboard[event.code] = false;
});

// 衝突判定を行う関数
function checkCollision() {
  const cameraBox = new THREE.Box3().setFromObject(camera);
  const blockBox = new THREE.Box3().setFromObject(block);

  return cameraBox.intersectsBox(blockBox);
}

// アニメーションループ内でのカメラの動作を制御する関数
function handleCameraMovement() {
  const cameraSpeed = 0.1;

  const previousPosition = camera.position.clone();

  if (keyboard['KeyW']) {
    camera.translateZ(-cameraSpeed);
  }
  if (keyboard['KeyA']) {
    camera.translateX(-cameraSpeed);
  }
  if (keyboard['KeyS']) {
    camera.translateZ(cameraSpeed);
  }
  if (keyboard['KeyD']) {
    camera.translateX(cameraSpeed);
  }

  // 衝突判定を行い、カメラの動きを停止する
  if (checkCollision()) {
    camera.position.copy(previousPosition);
  }
}

// アニメーションループ
function animate() {
  requestAnimationFrame(animate);

  // カメラの動作を制御する
  handleCameraMovement();

  // シーンのレンダリング
  renderer.render(scene, camera);
}

animate();

  </script>
</body>
</html>
